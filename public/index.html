<!DOCTYPE html>
<html data-ng-app="float">
  <head>
    <title>Float Messenger</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"> -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="socket.js"></script>
    <script src="app.js"></script>
  </head>

  <body class="indigo lighten-1">

    <div class="container">

    <nav>
      <div class="nav-wrapper indigo darken-4">
        <a href="#" class="brand-logo center">Float Messenger</a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <!-- <li><a href="sass.html">Sass</a></li>
          <li><a href="badges.html">Components</a></li>
          <li><a href="collapsible.html">JavaScript</a></li> -->
        </ul>
      </div>
    </nav>

    <div class="row" data-ng-controller="ConnectionController as connection">

      <div class="col m5 l4">

        <div class="card red darken-4" data-ng-hide="connection.connected">
          <div class="card-content white-text">
            <span class="card-title">No connection</span>
            <p>Hold up, we're trying to establish a connection to the messaging network.</p>
          </div>
        </div>

        <div class="card green darken-2" data-ng-controller="UserController as my" data-ng-hide="my.username == '???' || !connection.connected">
          <div class="card-content white-text">
            <span class="card-title">Hi, {{my.username}}!</span>
            <p>That's your name here. Want a name change? Type in <span class="cmd">/callme <em>newname</em></span> to change your screenname.</p>
          </div>
          <!-- <div class="card-action">
            <a href="#">This is a link</a>
            <a href="#">This is a link</a>
          </div> -->
        </div><!-- end card -->

        <div class="card" data-ng-controller="UserIndexController as list" id="user-index" data-ng-show="connection.connected">
          <div class="card-content">
            <span class="card-title">Who's Online?</span>
            <ul class="collection">
              <li data-username data-ng-repeat="username in list.usernames" class="collection-item"></li>
            </ul>
          </div>
        </div>

        <div class="card-panel green darken-2">
          <div class="card-content">
            <span class="white-text">
              Float Messenger is a real-time multi-user messaging system built on the MEAN stack with WebSockets and inspired by Slack.
            </span>
          </div>
        </div>

      </div>


      <div class="col s12 m7 l8" id="messenger" data-ng-controller="ChannelController as channel">
        <div id="chats-box" data-scroll-bottom="channel.messages">

          <ul id="chats" class="collection">
            <li data-chat-message data-ng-repeat="message in channel.messages" class="collection-item"></li>
            <li id="currently-typing" class="collection-item">{{channel.othersTypingStatus}}</li>
          </ul>
        </div><!-- end chats-box -->

        <form id="messenger-form" novalidate class="col s12">
          <div class="input-field col s12">
          <i class="material-icons prefix white-text">input</i>
          <label for="message_body" title="That's you!"><strong>{{channel.username}}</strong></label>
          <input type="text" name="message_body" id="message_body" data-ng-model="channel.message.body" autofocus autocomplete="off" placeholder="{{placeholderInput}}" data-ng-change="channel.typing()" data-ng-disabled="!connection.connected">
          </div>
          <button class="btn waves-effect waves-light" type="submit" name="message-submit" data-ng-click="channel.getInput(message)" id="message-submit" data-ng-disabled="!connection.connected">
            <i class="material-icons right">send</i>
          </button>
        </form>

      </div><!-- end container#messenger -->
    </div><!-- end row -->

    <footer>

    </footer>

    </div><!-- end container -->

  </body>

</html>
