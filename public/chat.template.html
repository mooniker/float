<div class="container">
    <div class="page-header">
        <h2>
            {{$ctrl.channel}}
            <small>{{$ctrl.chat}}</small>
        </h2>
    </div>

    <div class="row">

    <div class="container col-md-8">
        <ul class="list-group">
            <li data-ng-repeat="message in $ctrl.$storage.channels[$ctrl.channel].messages" class="list-group-item" data-ng-class="{'disabled': !message.userId && message.userId !== 0}">
                <span data-ng-if="message.userId != null" class="label" data-ng-class="message.userId === $ctrl.$storage.userId ? 'label-default' : 'label-primary'" title="userId: {{message.userId}}">{{$ctrl.$storage.userDirectory[message.userId]}}</span>
                <span data-ng-class="{'small text-uppercase': message.userId == null}" title="{{message.subtext}}">{{message.body}}</span>
                <small am-time-ago="message.postmark" class="pull-right"></small>
            </li>
        </ul>
        <div>
            <form class="form-horizontal" id="send-message-form">
                <div class="form-group">
                    <!--<label for="exampleInputName2" class="col-sm-1 control-label">message</label>-->
                    <div class="col-sm-10">
                        <input type="text" data-ng-model="$ctrl.message" class="form-control" id="message-input" placeholder="type your message here" autocomplete="off" autofocus>
                    </div>
                    <div class="col-sm-2">
                        <button type="submit" data-ng-click="$ctrl.send()" for="send-message-form" class="btn btn-primary form-control" data-ng-disabled="!$ctrl.$storage.isConnected || !$ctrl.message">
                            {{$ctrl.$storage.isConnected ? 'send' : 'wait'}}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="container col-md-4">
        <ul class="list-group">
            <li data-ng-repeat="event in $ctrl.$storage.channels[$ctrl.channel].events" class="list-group-item">
                <span>{{event.body}}</span>
                <small am-time-ago="event.postmark" class="label label-default"></small>
            </li>
        </ul>
    </div>

    </div><!-- ./row -->
    
    <!--$localStorage: <pre><code>{{$ctrl.$storage | json:2}}</code></pre>-->

</div>
